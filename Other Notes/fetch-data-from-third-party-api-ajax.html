<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

<button id="btn">Fetch</button>

<div class="container">
	<div class="row">
		
	</div>
</div>

<script type="text/javascript">
	//f6866ecb64af726c47ad422d7b08e283

	//https://api.themoviedb.org/3/discover/movie?api_key=f6866ecb64af726c47ad422d7b08e283&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_watch_monetization_types=flatrate

	const APIKEY = "f6866ecb64af726c47ad422d7b08e283";

	var urlPath = `https://api.themoviedb.org/3/discover/movie?api_key=${APIKEY}&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_watch_monetization_types=flatrate`

	const xmlhttp = new XMLHttpRequest();
	// console.log(urlPath);

	document.getElementById("btn").onclick = function(){

		xmlhttp.onreadystatechange = function(){
			if(xmlhttp.status == 401){
				console.log('Key missing')
			}
			if(xmlhttp.readyState==4 && xmlhttp.status==200){
				// console.log(typeof xmlhttp.responseText);
				// console.log(xmlhttp.responseText);
				var ans = JSON.parse(xmlhttp.responseText)
				// console.log(ans);
				// console.log(ans['results']);
				if(ans['results'].length > 0){
					var str=``
					ans['results'].forEach(function(val,i){
						// console.log(val.title);

						str = str + `
							<div class='col-xxl-3'>
								<img src='https://www.themoviedb.org/t/p/w220_and_h330_face${val.poster_path}' class='img-fluid' />
								<h2>${val.title}</h2>
								
							</div>
						`
						//https://www.themoviedb.org/t/p/w220_and_h330_face/6kbAMLteGO8yyewYau6bJ683sw7.jpg
					});
					// console.log(str);
					document.querySelector(".row").innerHTML = str;
				}
			}
		}

		xmlhttp.open("get",urlPath);
		xmlhttp.send();	
	}
</script>

